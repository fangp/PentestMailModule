package mail;

import java.io.IOException;
import java.net.MalformedURLException;

import org.apache.http.client.ClientProtocolException;

import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlForm;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlPasswordInput;
import com.gargoylesoftware.htmlunit.html.HtmlSubmitInput;
import com.gargoylesoftware.htmlunit.html.HtmlTextInput;

public class SubmitForm {
	private static String url;
	public SubmitForm(String url) {
		this.url = url;
	}
	public static void submit(String url) throws FailingHttpStatusCodeException, ClientProtocolException {
		final WebClient wc = new WebClient();
		HtmlPage page = null;
		try {
			page = wc.getPage(url);
		} catch (MalformedURLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		final HtmlForm form = page.getFormByName("login");
		final HtmlSubmitInput button = form.getInputByName("submit");
		final HtmlTextInput user = form.getInputByName("user");
		final HtmlPasswordInput passwd = form.getInputByName("passwd");
		user.setValueAttribute("test1");
		passwd.setValueAttribute("key001:asdasdasfggfdg==");
		try {
			button.click();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			wc.close();
			return;
		}
		wc.close();
	}
	/*public static void main(String[] args) throws FailingHttpStatusCodeException, MalformedURLException, IOException {
		SubmitForm sf = new SubmitForm("http://172.16.164.132");
		sf.submit();
	}*/
}
